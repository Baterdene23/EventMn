/**
 * Gemini AI Prompts for EventMN Chatbot
 */

export const INTENT_EXTRACTION_SYSTEM = `You are an intent extraction system for EventMN, a Mongolian event discovery platform.
Your job is to analyze user messages and extract structured intent data.

Return ONLY valid JSON. No extra text, no markdown, no explanations.

Schema:
{
  "intent": "search_event" | "recommend_event" | "help_eventmn" | "greeting" | "other",
  "city": "ulaanbaatar" | "darkhan" | "erdenet" | "online" | null,
  "date_range": "today" | "tomorrow" | "weekend" | "this_week" | "next_14_days" | "this_month" | null,
  "category": "music" | "arts" | "business" | "food-and-drink" | "sports" | "tech" | "community" | "education" | "health" | "other" | null,
  "keywords": ["string"],
  "price_max": number | null,
  "free_only": boolean
}

Defaults (apply if user doesn't specify):
- city: "ulaanbaatar"
- date_range: "next_14_days"

Category mapping rules:
- дуу/хөгжим/концерт/DJ/live/бүжиг → category="music"
- tech/технологи/IT/програм/хакатон/startup → category="tech"
- спорт/fitness/марафон/тэмцээн → category="sports"
- урлаг/theater/кино/gallery/үзэсгэлэн → category="arts"
- боловсрол/сургалт/workshop/семинар/лекц → category="education"
- бизнес/networking/conference/хурал → category="business"
- эрүүл мэнд/yoga/meditation/wellness → category="health"
- community/нийгэм/volunteer/charity → category="community"
- хоол/food/ресторан/wine/cooking → category="food-and-drink"

Intent detection:
- User asks about events, what to do, recommendations → "search_event" or "recommend_event"
- User asks how to use EventMN, buy tickets, create events → "help_eventmn"
- User says hello, hi, сайн байна уу → "greeting"
- Anything else → "other"

Price:
- "үнэгүй"/"free" → free_only: true
- specific price mentioned → price_max: that number

If unsure about any field, set it to null.`

export const ANSWER_GENERATION_SYSTEM = `Та EventMN туслах бот. 100% Монгол хэлээр хариулна.

ЧУХАЛ ДҮРЭМ:
- Зөвхөн өгөгдсөн events жагсаалт дээр тулгуурлана
- Events жагсаалтад байхгүй эвент, огноо, үнэ, байршил ХЭЗЭЭ Ч ЗОХИОЖ БОЛОХГҮЙ
- Хэрэв events хоосон бол "Одоогоор тохирох эвент олдсонгүй" гэж хэлээд нэг богино тодруулах асуулт асуу

Эвент жагсаахдаа дараах форматыг ашиглана:

 Нэр
 Төрөл (categoryMn ашигла)
 Тайлбар (excerpt ашигла, хэрэв урт бол богиносго)
 startTime (огноо, цаг)
 Байршил
 Үнэ (0 бол "Үнэгүй")
 Бүртгүүлэх холбоос: https://eventmn.mn/events/{slug}


---

Товч, тодорхой хариулт өг. Хэрэглэгчтэй найрсаг, туслах хүсэлтэй байдлаар харилц.`

export const FAQ_DATA: Record<string, string> = {
  // ==================== БҮРТГЭЛ & НЭВТРЭЛТ ====================
  register: `Бүртгүүлэх заавар:
1. Баруун дээд буланд байгаа "Бүртгүүлэх" товч дарна
2. Имэйл хаяг оруулна
3. Нууц үг үүсгэнэ (8+ тэмдэгт)
4. Имэйл рүү ирсэн баталгаажуулах код оруулна
5. Амжилттай бүртгэгдсэний дараа нэвтрэх боломжтой болно`,

  login: `Нэвтрэх:
1. Баруун дээд буланд "Нэвтрэх" товч дарна
2. Имэйл, нууц үг оруулна
3. Хэрэв бүртгэлгүй бол "Бүртгүүлэх" сонгоно

Нууц үг мартсан:
- "Нууц үг мартсан" линк дарна
- Имэйл хаягаа оруулна
- Имэйл рүү ирсэн код оруулна
- Шинэ нууц үг тохируулна

2FA баталгаажуулалт:
- Хэрэв 2FA идэвхжүүлсэн бол authenticator app-аас код оруулна`,

  logout: `Гарах:
1. Баруун дээд буланд өөрийн нэр дээр дарна
2. "Гарах" товч дарна
3. Амжилттай гарсны дараа нүүр хуудас руу шилжинэ`,

  // ==================== ХУВИЙН МЭДЭЭЛЭЛ ====================
  profile: `Хувийн мэдээлэл засах:
1. Нэвтэрсэн байх
2. Баруун дээд буланд профайл зураг/нэр дээр дарна
3. "Профайл" эсвэл "Тохиргоо" сонгоно
4. Дараах зүйлсийг засаж болно:
   - Нэр
   - Профайл зураг
   - Био/Танилцуулга
   - Сонирхол (эвентийн төрөл)
5. "Хадгалах" товч дарна`,

  security: `Аюулгүй байдал тохиргоо:

2FA идэвхжүүлэх:
1. Тохиргоо → Аюулгүй байдал
2. "2FA идэвхжүүлэх" товч дарна
3. Нэвтрэх бүрт 6 оронтой код оруулж баталгаажуулна.

2FA унтраах:
1. Тохиргоо → Аюулгүй байдал
2. "2FA унтраах" товч дарна`,

  interests: `Сонирхол тохируулах:
1. Профайл → Сонирхол
2. Дараах төрлүүдээс сонгоно:
   - Хөгжим
   - Технологи
   - Спорт
   - Урлаг
   - Боловсрол
   - Бизнес
   - Эрүүл мэнд
   - Нийгэм
   - Хоол & Ундаа
3. Хадгална

Сонирхолд тохирсон эвентүүдийг санал болгох болно!`,

  // ==================== ЭВЕНТ ҮҮСГЭХ & УДИРДАХ ====================
  create_event: `Эвент үүсгэх:
1. Нэвтэрсэн байх
2. Dashboard → "Эвент нэмэх" товч дарна
3. Дараах мэдээллийг оруулна:
   - **Эвентийн нэр** (тодорхой, сонирхолтой)
   - **Огноо, цаг** (эхлэх, дуусах)
   - **Байршил** (хот сонгох, дэлгэрэнгүй хаяг)
   - **Төрөл** сонгох (хөгжим, технологи, г.м.)
   - **Үнэ** (үнэгүй бол 0)
   - **Тодорхойлолт буюу тайлбар** (эвентийн дэлгэрэнгүй мэдээлэл)
   - **Зураг** (cover image) зураг оруулахгүй бол default зураг ашиглагдана
4. "Хадгалах" дарна → Draft төлөвт хадгалагдана
5. Бэлэн болсон үед "Нийтлэх" товч дарна

**Анхаарах:**
- Нийтлэсний дараа админ баталгаажуулсны дараа бүх хүн эвентийг харах боломжтой`,

  edit_event: `Эвент засах:
1. Dashboard руу очно
2. Засах гэж буй эвент дээрээ дарна
3. "Засах" товч дарна
4. Дараах зүйлсийг өөрчилж болно:
   - Нэр
   - Огноо, цаг
   - Байршил
   - Үнэ
   - Тодорхойлолт
   - Зураг
5. "Хадгалах" дарна

Анхаарах:
- Нийтлэгдсэн эвентийг ч засаж болно
- Бүртгүүлсэн хүмүүст өөрчлөлт автоматаар мэдэгдэхгүй`,

  delete_event: `Эвент устгах:
1. Dashboard → Миний эвентүүд
2. Устгах эвент дээр дарна
3. "Устгах" товч дарна
4. Баталгаажуулах цонх гарна
5. "Тийм" дарж баталгаажуулна

Анхаарах:
- Устгасан эвентийг сэргээх боломжгүй
- Бүртгүүлсэн хүмүүсийн мэдээлэл бас устана`,

  publish_event: `Эвент нийтлэх:
1. Админ Dashboard-д Draft төлөвтэй эвентээ олно
2. Эвент дээр дарж нээнэ
3. "Нийтлэх" товч дарна
4. Эвент одоо бүх хүнд харагдах болно

Буцааж авах:
- Нийтлэгдсэн эвентийг "Буцаах" товчоор буцааж Draft болгож болно`,

  organizer: `Organizer болох:
EventMN дээр хэн ч organizer болж эвент үүсгэх боломжтой!

1. EventMN дээр бүртгүүлж нэвтэрнэ
2. Dashboard руу очно
3. "Эвент нэмэх" товч дарна
4. Эвентийнхээ мэдээллийг бөглөнө
5. Хадгалаад, нийтлэнэ

Organizer-ийн боломжууд:
- Хэдэн ч эвент үүсгэх
- Бүртгүүлсэн хүмүүсийг харах
- Эвентийн статистик харах
- Оролцогчидтой холбогдох`,

  // ==================== ЭВЕНТЭД БҮРТГҮҮЛЭХ ====================
  ticket: `Эвентэд бүртгүүлэх:
1. Өөрт таалагдсан эвент дээр дарна
2. "Бүртгүүлэх" товч дарна
3. Хэрэв нэвтрээгүй бол нэвтрэх хуудас руу шилжинэ
4. Бүртгэл амжилттай болсны дараа бүртгүүлж болно

Бүртгэл цуцлах:
1. Профайл → Миний бүртгэлүүд
2. Цуцлах эвент дээр дарна
3. "Бүртгэл цуцлах" товч дарна

Зарим эвентүүд үнэгүй, зарим нь төлбөртэй.`,

  // ==================== ЭВЕНТ ХАЙХ ====================
  search_event: `Эвент хайх:
1. Нүүр хуудас эсвэл "Эвентүүд" хэсэг рүү очно
2. Дараах шүүлтүүрүүд ашиглаж болно:
   - **Хот**: Улаанбаатар, Дархан, Эрдэнэт, Онлайн
   - **Төрөл**: Хөгжим, Технологи, Спорт, г.м.
3. Хайлтын талбарт түлхүүр үг бичиж хайж болно

Санал болгох:
- Профайлдаа сонирхол тохируулбал тохирсон эвентүүд санал болгоно түүнийг хянах самбар хэсгээс харна уу!`,

  // ==================== ЕРӨНХИЙ МЭДЭЭЛЭЛ ====================
  general: `EventMN гэж юу вэ?
EventMN бол Монголд болж буй эвентүүдийг нэг дороос олж, бүртгүүлэх шинэ эвент үүсгэх боломжтой платформ.

Үндсэн боломжууд:
- Эвент хайх, шүүх (хот, төрөл)
- Эвентэд бүртгүүлэх
- Өөрийн эвент үүсгэх, удирдах
- Бусад хэрэглэгчидтэй мессеж илгээх
- Сонирхолд тохирсон эвент санал болгох

Асуух зүйл байвал надаас асуугаарай!`,

  contact: `Холбоо барих:
- Имэйл: btrdngnbt@gmail.com`,

  // ==================== МЕССЕЖ ====================
  messages: `Мессеж илгээх:
1. эвент оролцогчид болон зохион байгуулагчид хоорондоо мессежээр харилцах боломжтой.
2. эвентийн дэлгэрэнгүй хуудсанд орж мессеж илгээх боломжтой.

Оролцогчид:
1. Эвентийн дэлгэрэнгүй хуудсанд очно
2. Зохион байгуулагчтай холбогдох дээр дарна
3. Мессежээ бичээд илгээнэ

Тухайн эвентийн дэлгэрэнгүй хуудсанд орж оролцогчдын мессежүүдийг харж болно.
1. Эвентийн дэлгэрэнгүй хуудсанд очно
2. Эвентийнхээ "Оролцогчид" хэсэг рүү очно
3. Оролцогчдын мессежүүдийг харж болно
Мессеж харах:
- Баруун дээд буланд "Мессеж" icon дарна`
}


export function buildIntentPrompt(userMessage: string): string {
  return `Analyze this user message and extract intent:

"${userMessage}"

Return ONLY the JSON object, no other text.`
}

export function buildAnswerPrompt(
  userMessage: string,
  events: unknown[],
  intent: string
): string {
  if (intent === "greeting") {
    return `Хэрэглэгч мэндчилж байна: "${userMessage}"

Найрсаг байдлаар мэндчилж, EventMN-р юу хийж болохыг товч танилцуулна уу.`
  }

  if (intent === "help_eventmn") {
    return `Хэрэглэгч EventMN ашиглах талаар асууж байна: "${userMessage}"

Тус болохуйц мэдээлэл өгнө үү.`
  }

  if (events.length === 0) {
    return `Хэрэглэгчийн асуулт: "${userMessage}"

Эвент олдсонгүй. "Одоогоор тохирох эвент олдсонгүй" гэж хэлээд, нэг богино тодруулах асуулт асуу (жишээ: ямар төрлийн эвент сонирхож байна, аль өдөр тохиромжтой гэх мэт).`
  }

  return `Хэрэглэгчийн асуулт: "${userMessage}"

Олдсон эвентүүд (${events.length}):
${JSON.stringify(events, null, 2)}

Дээрх эвентүүдийг форматлаж хэрэглэгчид харуулна уу. Зөвхөн өгөгдсөн мэдээллийг ашигла, нэмэлт зүйл ЗОХИОХГҮЙ.`
}
